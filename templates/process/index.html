{% extends "process/base.html" %}
{% load static from staticfiles %}
{% block title %}主页{% endblock %}
{% block head %}
<script type="text/javascript" src="{% static "js/data.js" %}"></script>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="row">

        </div>
    </div>
	<div id="allmap">

    </div>
{% endblock %}
{% block endscript %}
<script type="text/javascript">
	// 百度地图API功能
	var map = new BMap.Map("allmap");
	map.centerAndZoom(new BMap.Point(116.404, 39.915), 12);     // 初始化地图,设置中心点坐标和地图级别
    map.enableScrollWheelZoom();                        //启用滚轮放大缩小
    var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});// 左上角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_BOTTOM_LEFT});  //左上角，添加默认缩放平移控件
    map.addControl(top_left_control);
    map.addControl(top_left_navigation);
    map.enableKeyboard();

    var polygon_options = {
            strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5
        };
    for ( var region_id in data ){
        var points = [];  // 添加海量点数据

        for (var i = 0; i < data[region_id].length; i++) {
                points.push(new BMap.Point(data[region_id][i][0], data[region_id][i][1]));
        }

        var polygon = new BMap.Polygon(points, polygon_options);  // 初始化PointCollection
        map.addOverlay(polygon);
    }



</script>
{% endblock %}
